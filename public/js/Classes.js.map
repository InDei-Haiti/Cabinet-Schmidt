{"version":3,"sources":["About.js","Agenda.js","Datepicker.js","Faq.js","FluxHandler.js","MouseAnimation.js","Slider.js","Toolbox.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Classes.js","sourcesContent":["About = function () {\r\n  this.slides = [];\r\n  this.active = null;\r\n  this.transitionsProperty = null;\r\n  this.imagesSuffixPath = null;\r\n  this.el = null;\r\n  this.init()\r\n}\r\n\r\nAbout.prototype.init = function () {\r\n  this.imagesSuffixPath = '/images/';\r\n  this.el = 'panel';\r\n  this.lastSlide = new Date();\r\n  var suffix = this.imagesSuffixPath;\r\n  this.active = 1;\r\n\r\n  //Methods executed at init.\r\n  this.getDatasAndInitView();\r\n  this.forceScroll();\r\n  this.enableKeyboardListener();\r\n  this.scrollListener();\r\n  this.mouseListener();\r\n  this.loadListener();\r\n  this.preloadImages()\r\n  var that = this;\r\n  setTimeout(function () {\r\n      that.clickListener();\r\n  },50)\r\n};\r\n\r\nAbout.prototype.getDatasAndInitView = function () {\r\n  var that = this;\r\n  var list = [];\r\n  $.getJSON('/a-propos/datas').done(function(data) {\r\n    for (var i = 0; i < data.length; i++) {\r\n      var obj = {};\r\n      obj.list = [];\r\n      obj.title = data[i].title;\r\n      obj.conclusion = data[i].conclusion;\r\n      obj.slogan = data[i].summary;\r\n      obj.cover = data[i].cover;\r\n      for (var n = 0; n < data[i].list_item.length; n++) {\r\n        obj.list.push(data[i].list_item[n]);\r\n      }\r\n      list.push(obj)\r\n    }\r\n    // that.slides = list;\r\n    that.slides = list;\r\n    that.initFirstView();\r\n  })\r\n};\r\n\r\nAbout.prototype.forceScroll = function () {\r\n  var that = this;\r\n  if($('.about').length>0) {\r\n    setTimeout(function () {\r\n      if(!that.isDown()) {\r\n        $('html,body').animate({scrollTop: $('.header').height()}, 500);\r\n      }\r\n    },1600)\r\n  }\r\n};\r\n\r\nAbout.prototype.scrollListener = function () {\r\n  $(window).on('scroll',function () {\r\n    if($(this).scrollTop()>=$('.header').height()) {\r\n      $('.panel__mouse svg').addClass('show')\r\n    }\r\n  })\r\n};\r\n\r\nAbout.prototype.loadListener = function () {\r\n  $(window).on('load',function () {\r\n    if($(this).scrollTop()>=$('.header').height()) {\r\n      $('.panel__mouse svg').addClass('show')\r\n    }\r\n  })\r\n};\r\n\r\nAbout.prototype.mouseListener = function() {\r\n    var that = this;\r\n    $(document).on('mousewheel DOMMouseScroll', function(ev) { // DOMMouseScroll ev too for shitty Firefox.\r\n        if (navigator.userAgent.toLowerCase().indexOf('firefox') > -1) {\r\n            if (ev.originalEvent.detail > 0) {\r\n                //scroll down\r\n                if (that.canSlide() && that.isDown()) { // ev.originalEvent.wheelDelta < 0 == Scroll down.\r\n                    that.getNext();\r\n                }\r\n            }\r\n        } else {\r\n            ev.delta = null;\r\n            if (ev.originalEvent) {\r\n                if (ev.originalEvent.wheelDelta) {\r\n                    ev.delta = ev.originalEvent.wheelDelta;\r\n                    if (that.canSlide() && that.isDown() && ev.delta < 0) { // ev.originalEvent.wheelDelta < 0 == Scroll down.\r\n                        that.getNext();\r\n                    }\r\n                } else if (ev.originalEvent.clientY && $(window).scrollTop() == $('.header').height() && ev.originalEvent.wheelDelta == undefined) {\r\n                    if (that.canSlide() && that.isDown()) { // ev.originalEvent.wheelDelta < 0 == Scroll down.\r\n                        that.getNext();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n    })\r\n};\r\n\r\nAbout.prototype.isDown = function () {\r\n  var headerHeight = $('.header').height();\r\n  if($(document).scrollTop()>=headerHeight) {\r\n    return true\r\n  } else {\r\n    return false\r\n  }\r\n};\r\n\r\nAbout.prototype.enableKeyboardListener = function () {\r\n  var that = this;\r\n  $(document).on('keydown',function (ev) {\r\n    var key = ev.keyCode || ev.which;\r\n    if (key==39 && that.canSlide()) { // right arrow\r\n      that.getNext();\r\n    }\r\n  })\r\n};\r\n\r\nAbout.prototype.clickListener = function () {\r\n  var that = this;\r\n  $(document).on('click', '.panel__nav .item',function () {\r\n    var index = $(this).data('index');\r\n    if(!$(this).hasClass('current')) {\r\n      if(index==1) {\r\n        that.active = 0;\r\n      } else {\r\n        that.active = index-1;\r\n      }\r\n      setTimeout(function () { // Timeout to reach the next created DOM element, if i don't use this, the dom catched will be the dom destroyed.\r\n        $('.panel__nav .item').eq(that.active-1).addClass('current');\r\n      }, 1100);\r\n     that.getNext()\r\n    }\r\n     // getNext will increment it.\r\n  })\r\n};\r\n\r\nAbout.prototype.getNext = function () {\r\n  var el = $('.'+this.el+'--active');\r\n  var that = this;\r\n  if(this.active>=0 && this.active<4) {\r\n    this.active++;\r\n    this.handleThisAndCall(el,that.active-1)\r\n  } else if(this.active==4) {\r\n    this.active = 1;\r\n    this.handleThisAndCall(el,that.active-1)\r\n  }\r\n};\r\n\r\nAbout.prototype.canSlide = function () {\r\n  if(this.lastSlide) {\r\n    if(new Date(this.lastSlide.getTime() + 2000) < new Date()) {\r\n      this.lastSlide = new Date()\r\n      return true\r\n    } else {\r\n      return false\r\n    }\r\n  } else {\r\n    return true\r\n  }\r\n};\r\n\r\nAbout.prototype.highlightCurrent = function (index) {\r\n  $('.panel__nav .wrapper').removeClass('wrapper--active')\r\n  $('.panel__nav .wrapper').eq(this.active-1).addClass('wrapper--active')\r\n};\r\n\r\nAbout.prototype.handleThisAndCall = function (el,index) {\r\n  var that = this;\r\n  el.addClass(this.el+'--extend');\r\n  $('.'+this.el+'__slogan').css('visibility','hidden')\r\n  $('.'+this.el+'__conclusion').css('visibility','hidden')\r\n  $('.'+this.el+'.arguments__item').css('visibility','hidden')\r\n  $('.'+this.el+'--extend *').fadeOut(150);\r\n  setTimeout(function () {\r\n    $('.about').addClass('about--reveal')\r\n  },100)\r\n  setTimeout(function () {\r\n    $('.about__cover').addClass('about__cover--reveal')\r\n  },450)\r\n  setTimeout(function () {\r\n    $('.about__cover').removeClass('about__cover--reveal').css('background-image','url(\"'+that.getCover(index)+'\")');\r\n    $('.about').removeClass('about--reveal');\r\n    $('.'+that.el+'--extend').fadeOut(500).remove();\r\n  },700)\r\n  setTimeout(function () {\r\n    that.appendSlide(index)\r\n  },850)\r\n};\r\n\r\nAbout.prototype.appendSlide = function (index) {\r\n  var that = this;\r\n  var template = '<div class=\"col-xs-6 col-custom panel panel--active panel--slided\"></div>';\r\n  $('.about').append(template);\r\n  var el = $('.'+that.el+'--active'); // Don't define it before otherwise it won't catch any dom element.\r\n  this.appendChildren(el,index);\r\n  this.getInfos(el,index);\r\n};\r\n\r\nAbout.prototype.preloadImages = function () {\r\n  for (var i = 0; i < this.slides.length; i++) {\r\n    img = new Image()\r\n    $('body').append('<span id=\"#preloader\"></span>')\r\n    img.onload = function () {\r\n      $('#preloader').css('background-image','url(\"'+img.src+'\")');\r\n    }\r\n    img.src = this.slides[i].cover;\r\n  }\r\n  $('#preloader').remove();\r\n};\r\n\r\nAbout.prototype.appendChildren = function (el,index) {\r\n  var that = this;\r\n  var childrenTemplate = '<div class=\"row wrapper\">'+\r\n                            '<div class=\"col-xs\">'+\r\n                              '<h1 class=\"row panel__title\"></h1>'+\r\n                              '<div class=\"row panel__slogan panel__slogan--slided\"></div>'+\r\n                              '<div class=\"row arguments\"><ul class=\"arguments__list\"></ul></div>'+\r\n                              '<div class=\"row panel__mouse\">'+$('.mouse-template').clone().html()+'</div>'+\r\n                            '</div>'+\r\n                          '</div>'+\r\n                          '<div class=\"row panel__nav panel__nav--slided\">'+$('.nav-template').clone().html()+'</div>'\r\n\r\n  setTimeout(function () {\r\n    $('.panel__mouse svg').addClass('slided')\r\n    that.highlightCurrent(index);\r\n  },50)\r\n  el.append(childrenTemplate);\r\n};\r\n\r\nAbout.prototype.getInfos = function (el,index) {\r\n  var title = this.slides[index].title;\r\n  var slogan = this.slides[index].slogan;\r\n  el.find('.panel__title').text(title);\r\n  el.find('.panel__slogan').text(slogan);\r\n  for (var i = 0; i < this.slides[index].list.length; i++) {\r\n    var elemList = this.slides[index].list[i].name;\r\n    el.find('.arguments__list').append('<li class=\"arguments__item arguments__item--slided\">'+elemList+'</li>')\r\n  }\r\n  // if(this.slides[this.active-1].conclusion) { // TODO: DONT ERASE. Conclusion removed. I let the js here just in case.\r\n  //   var conclusion = this.slides[this.active-1].conclusion\r\n  //   el.append('<div class=\"row panel__conclusion panel__conclusion--slided\"></div>');\r\n  //   el.find('.panel__conclusion').text(conclusion);\r\n  // }\r\n};\r\n\r\nAbout.prototype.getCover = function (index) {\r\n  return this.slides[index].cover // this.active has a 1 based index, so given that js' arrays have a 0 based index, i have to decrement it of 1.\r\n};\r\n\r\nAbout.prototype.initFirstView = function () {\r\n  var el = $('.'+this.el+'--active'); // Don't define it before otherwise it won't catch any dom element.\r\n  var title = this.slides[this.active-1].title;\r\n  var slogan = this.slides[this.active-1].slogan;\r\n  el.find('.panel__title').text(title);\r\n  el.find('.panel__slogan').text(slogan);\r\n  $('.about__cover').css('background-image','url(\"'+this.getCover(0)+'\")');\r\n  for (var i = 0; i < this.slides[this.active-1].list.length; i++) {\r\n    var elemList = this.slides[this.active-1].list[i].name;\r\n    el.find('.arguments__list').append('<li class=\"arguments__item arguments__item--slided\">'+elemList+'</li>')\r\n  }\r\n  this.highlightCurrent(this.active-1);\r\n};\r\noriginalNav = new About();\r\n","Agenda = function () {\r\n  this.selector = null;\r\n  this.active = null;\r\n  this.year = null;\r\n  this.parsedDates = [];\r\n  this.monthList = [];\r\n  this.datepicker = null;\r\n  this.init();\r\n}\r\n\r\nAgenda.prototype.init = function () {\r\n  var that = this;\r\n  this.selector = '.agenda-text';\r\n  this.translate = 0;\r\n  setTimeout(function () {\r\n    that.datepicker = hillsDatepicker;\r\n  }, 50);\r\n  this.year = new Date().getFullYear();\r\n  this.monthList = ['Décembre','Janvier','Février','Mars','Avril','Mai','Juin','Juillet','Août','Septembre','Octobre','Novembre'];\r\n  this.clickListener();\r\n  this.parseResumes();\r\n  this.getDatas();\r\n  this.initActive();\r\n};\r\n\r\nAgenda.prototype.getNext = function () {\r\n  if(this.active<this.dates.length) {\r\n      this.active++;\r\n      var that = this;\r\n      $('.agenda-text__wrapper').fadeOut().fadeIn();\r\n      setTimeout(function () {\r\n        $('.agenda-text__date').text(that.dates[that.active]);\r\n        $('.agenda-text__content').text(that.listContent[that.active]);\r\n        var parsed = $.parseHTML($('.agenda-text__content').text());\r\n        $('.agenda-text__content').html(parsed);\r\n      }, 400);// 400 is default transition time of fadeout.\r\n      if(this.active>1) {\r\n        var lastActiveMonth = this.dates[this.active-1].split(' ')[1]; // the second word contains the month.\r\n        var currMonth = this.dates[this.active].split(' ')[1];// the second word contains the month.\r\n        if(lastActiveMonth!==currMonth) { // FIXME\r\n          var month = this.datepicker.getMonthIndex(currMonth);\r\n          this.datepicker.getNext();\r\n          // this.datepicker.getCalendarMonth(month);\r\n        }\r\n      }\r\n  }\r\n};\r\n\r\nAgenda.prototype.getIndex = function (index) {\r\n  this.active = index;\r\n  var that = this;\r\n  $('.agenda-text__wrapper').fadeOut().fadeIn();\r\n  setTimeout(function () {\r\n    $('.agenda-text__date').text(that.dates[that.active]);\r\n    $('.agenda-text__content').text(that.listContent[that.active]);\r\n    var parsed = $.parseHTML($('.agenda-text__content').text());\r\n    $('.agenda-text__content').html(parsed);\r\n  }, 400);// 400 is default transition time of fadeout.\r\n};\r\n\r\nAgenda.prototype.getMonth = function (index) {\r\n    if(this.month<12) {\r\n        return this.monthList[index]; // return current month as String (e.g: Juin)\r\n    } else {\r\n        // For december\r\n        return this.monthList[0];\r\n    }\r\n};\r\n\r\nAgenda.prototype.initActive = function () {\r\n  var val = $('.agenda-text__date').text();\r\n  var that = this;\r\n  setTimeout(function() {\r\n      that.active = that.dates.indexOf(val);\r\n  }, 10);\r\n};\r\n\r\nAgenda.prototype.getDatas = function () {\r\n  var listDates = [];\r\n  var listFullDates = [];\r\n  var listContent =  [];\r\n  $.getJSON('/collection/exceptions/appointments')\r\n  .done(function (data) {\r\n    for (var i = 0; i < data.length; i++) {\r\n      var dates = data[i].date.split(' ');\r\n      var day = dates[0];\r\n      var month = dates[1];\r\n      listFullDates.push(data[i].date);\r\n      listContent.push(data[i].content);\r\n      listDates.push({day: day ,month: month });\r\n    }\r\n  })\r\n  this.listContent = listContent;\r\n  this.parsedDates = listDates;\r\n  this.dates = listFullDates;\r\n};\r\n\r\nAgenda.prototype.clickListener = function () {\r\n  var that = this;\r\n  $('.agenda-text__button').click(function () {\r\n    that.getNext()\r\n  });\r\n};\r\n\r\nAgenda.prototype.parseResumes = function () {\r\n  $('.agenda-text__content').each(function () {\r\n    var parsedAgenda = $.parseHTML($(this).text());\r\n    $(this).html(parsedAgenda);\r\n  })\r\n};\r\n\r\ncomptaAgenda = new Agenda();\r\n","// Ismaël Sebbane's Datepicker Plugin, Design inspired by Google Material UI.\r\n\r\nDatepicker = function (langage) {\r\n  this.calendar = null;\r\n  var date = null;\r\n  this.year = null;\r\n  this.month = null;\r\n  this.day = null;\r\n  this.dayList = null;\r\n  this.engDayList =  null;\r\n  this.container = null;\r\n  this.monthProperties = null;\r\n  this.langage = null;\r\n  this.defaults = {\r\n    langage : \"fr\"\r\n  }\r\n  this.active = null;\r\n  this.selector = null;\r\n  this.width = null;\r\n  this.init()\r\n}\r\n\r\nDatepicker.prototype.init = function () {\r\n  this.calendar = new Date();\r\n  var date = this.calendar;\r\n  this.year = date.getFullYear();\r\n  this.month = date.getMonth()+1; // Index for months starts by 0;\r\n  this.day = date.getDay();\r\n  this.dayList = ['Dimanche', 'Lundi', 'Mardi', 'Mercredi', 'Jeudi', 'Vendredi', 'Samedi'];\r\n  this.engDayList = ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];\r\n  this.monthList = ['Décembre','Janvier','Février','Mars','Avril','Mai','Juin','Juillet','Août','Septembre','Octobre','Novembre'];\r\n  if (this.langage==null) {\r\n    this.langage = this.defaults.langage;\r\n  }\r\n  this.active = this.month;\r\n  this.agenda = comptaAgenda;\r\n  this.width = $('.datepicker__body').width();\r\n  this.selector = '.calendar-list';\r\n  this.transition = this.setTranslate();\r\n  this.createBoards();\r\n  this.updateDayLabel();\r\n  this.enableClickListeners();\r\n  this.addMarkers(this.agenda.parsedDates);\r\n  $('.month__text').text(this.getThisMonth()+' '+this.year);\r\n  //this.highlightToday();\r\n  $('.calendar-list').css('transform','translate3d('+this.translate+'px,0,0)');\r\n  /*\r\n  $('.col').click(function () {\r\n    $('.col').removeClass('col--selected');\r\n    $(this).addClass('col--selected');\r\n  })*/\r\n};\r\n\r\nDatepicker.prototype.getToday = function () {\r\n  return this.dayList[this.day]; // return current day as String (e.g: Dimanche)\r\n};\r\n\r\nDatepicker.prototype.getThisMonth = function () {\r\n  if(this.month<12) {\r\n      return this.monthList[this.month]; // return current month as String (e.g: Juin)\r\n  } else {\r\n    // For december\r\n      return this.monthList[0];\r\n  }\r\n};\r\n\r\nDatepicker.prototype.getMonth = function (index) {\r\n    if(this.month<12) {\r\n        return this.monthList[index]; // return current month as String (e.g: Juin)\r\n    } else {\r\n        // For december\r\n        return this.monthList[0];\r\n    }\r\n};\r\n\r\nDatepicker.prototype.getTodayNumber = function () {\r\n  return new Date().toString().split(' ')[2];\r\n};\r\n\r\nDatepicker.prototype.getDayIndex = function (day) {\r\n  var index = this.dayList.indexOf(day);\r\n  return index // With String day as parameter, returns day Index.\r\n};\r\n\r\nDatepicker.prototype.getMonthIndex = function (month) {\r\n  var index = this.monthList.indexOf(month);\r\n  return index; // With String day as parameter, returns month  Index.\r\n};\r\n\r\nDatepicker.prototype.getMonthDayNumber = function(year,monthIndex) {\r\n  var dayIndex = 0;\r\n  while (this.isPrevDayTheSameMonth(year,monthIndex,dayIndex)) {\r\n    dayIndex--; // This will trigger the function until it find a prev day from a different month than the day analysed.\r\n  }\r\n  return -dayIndex // the index if negative so i invert it\r\n}\r\n\r\nDatepicker.prototype.getFirstDayOfMonth = function (year, monthIndex) {\r\n  var negativeIndex = this.getMonthDayNumber(year, monthIndex)\r\n  negativeIndex = -negativeIndex;\r\n  // the method below returns a inverted value to make the count of days number in a month, i need to have it negative to use it a new Date object as a parameter to get the day string of the first day of the month, i'm also adding +1 because this value refers to the last day of the previous month we want to check the first day\r\n  var day = new Date(year,monthIndex,negativeIndex+1).toString().split(' ')[0]; // Getting first word from returned string of object instancied with a index parameter we've got from method above\r\n  return this.translation(\"day\",day); // translating it to French.\r\n};\r\n\r\nDatepicker.prototype.isPrevDayTheSameMonth = function (year,monthIndex,index) {\r\n  var lastDay = new Date(year,monthIndex, 0).toString(); // Stringify the returned value to split it up.\r\n  var currentMonth = lastDay.split(' ')[1]; // Extracting the second word of sentence of get the month on the returned date\r\n  var prevDay = new Date(year,monthIndex, index).toString() // Making the same to check if the prev day month is still on the same month\r\n  var monthToken = prevDay.split(' ')[1];\r\n  return currentMonth==monthToken ? true : false // If the day before the current day is from the same month, this function will return true\r\n}\r\n\r\nDatepicker.prototype.enableClickListeners = function () {\r\n  var that = this;\r\n  $('.month__prev').click(function () {\r\n    that.getPrev()\r\n  })\r\n  $('.month__next').click(function () {\r\n    that.getNext()\r\n  })\r\n  $('.col[data-day]').click(function () {\r\n    if($(this).hasClass('col--highlight')) {\r\n      var month = $(this).parent().parent().data('month');\r\n      var day = $(this).data('day');\r\n      var date = new Date();\r\n      var sentence = day+' '+that.getMonth(month)+' '+date.getFullYear();\r\n      var index = that.agenda.dates.indexOf(sentence);\r\n      that.agenda.getIndex(index);\r\n    }\r\n  })\r\n};\r\nDatepicker.prototype.translation = function (type, string) {\r\n  if(this.langage==\"fr\") {\r\n    if(type==\"day\") {\r\n      var position = this.engDayList.indexOf(string)\r\n      return this.dayList[position];\r\n    }\r\n  }\r\n};\r\n\r\nDatepicker.prototype.getCalendarMonth = function (index) {\r\n  this.active==index;\r\n  this.setTranslate();\r\n  $('.calendar-list').css('transform','translate3d('+this.translate+'px,0,0)');\r\n  $('.month__text').text(this.getMonth(this.active)+' '+this.year);\r\n};\r\n\r\nDatepicker.prototype.getNext = function () {\r\n  if(this.active<11) {\r\n    this.active++;\r\n    this.setTranslate()\r\n    $('.calendar-list').css('transform','translate3d('+this.translate+'px,0,0)');\r\n    $('.month__text').text(this.getMonth(this.active)+' '+this.year);\r\n  } else if(this.active==11) {\r\n    this.active=0;\r\n    this.setTranslate();\r\n    $('.calendar-list').css('transform','translate3d('+this.translate+'px,0,0)');\r\n    $('.month__text').text(this.getMonth(this.active)+' '+this.year);// Setting parameter manually because activ is defined to 0\r\n  }\r\n};\r\nDatepicker.prototype.getPrev = function () {\r\n  if(this.active>1) {\r\n    this.active--;\r\n    this.setTranslate()\r\n    $('.calendar-list').css('transform','translate3d('+this.translate+'px,0,0)');\r\n    $('.month__text').text(this.getMonth(this.active)+' '+this.year);\r\n  } else if(this.active==0) {\r\n    this.active=11;\r\n    this.setTranslate()\r\n    $('.calendar-list').css('transform','translate3d('+this.translate+'px,0,0)');\r\n    $('.month__text').text(this.getMonth(this.active)+' '+this.year); // Setting parameter manually because activ is defined to 0\r\n  }\r\n};\r\nDatepicker.prototype.getDayIndex = function (today) {\r\n  var index = this.dayList.indexOf(today);\r\n  return index // With String day as parameter, returns day Index.\r\n};\r\n\r\nDatepicker.prototype.updateDayLabel = function () {\r\n  $('.date__day').html(this.getToday());\r\n  $('.date__month').html(this.getThisMonth());\r\n  $('.date__number').html(this.getTodayNumber());\r\n};\r\n\r\n/*\r\nDatepicker.prototype.highlightToday = function () {\r\n  var toHighlight = $('.calendar[data-month=\"'+this.month+'\"] .calendar__day-list .col').eq(this.day).addClass('col--selected');\r\n};*/\r\n\r\nDatepicker.prototype.createBoards = function () {\r\n  el = $(this.selector);\r\n  $('.calendar-list').css('width',12*this.width)\r\n  for (var i = 1; i <= 12; i++) { // creating month container, i starting to 1 for have the good index.\r\n    el.append('<div class=\"calendar\" data-month=\"'+i+'\" style=\"flex-basis:'+$('.datepicker__body').width()+'px;width:'+$('.datepicker__body').width()+'px\"></div>');\r\n  }\r\n  for (var i = 0; i <= 12; i++) { // creating label container list and days container list\r\n    $('.calendar:nth-child('+i+')').append('<div class=\"calendar__label-list\"></div>'); // Eq index starts to 0, need increment it\r\n    $('.calendar:nth-child('+i+')').append('<div class=\"calendar__day-list\"></div>');\r\n  }\r\n  for (var i = 0; i <= 12; i++) {\r\n    for (var n = 0; n < this.dayList.length; n++) {// creating day labels as col with loop in each month with another loop\r\n      $('.calendar__label-list').eq(i).append('<div class=\"col\"><span>'+this.dayList[n].substr(0,1)+'</span></div>')\r\n    }\r\n    var firstDay = this.getFirstDayOfMonth(this.year,i+1);\r\n    var firstDayPos = this.getDayIndex(firstDay);\r\n    for (var x = 1 ; x <= this.getMonthDayNumber(this.year,i+1) +firstDayPos; x++) { // creating day cols in each month with another loop and adding loops because of useless loop to make the month start to the good day\r\n      if(firstDayPos!==0) { // if month doesnt start with Sunday\r\n        if(x<firstDayPos+1) { // Day Index starts to 0, need to increment it for have the good start for months (e.g : the 1 at Tuesday label position\r\n          $('.calendar__day-list').eq(i).append('<div class=\"col\"></div>') // empty cols\r\n        } else {\r\n          if (firstDayPos==0) {\r\n            $('.calendar__day-list').eq(i).append('<div class=\"col\"><span>'+(x+1)+'</span></div>')\r\n          } else {\r\n            $('.calendar__day-list').eq(i).append('<div data-day=\"'+(x-firstDayPos)+'\" class=\"col\"><span>'+(x-firstDayPos)+'</span></div>')\r\n          }\r\n        }\r\n      } else { // end first if for x loop\r\n        $('.calendar__day-list').eq(i).append('<div data-day=\"'+x+'\"class=\"col\"><span>'+x+'</span></div>')\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nDatepicker.prototype.addMarkers = function (options) {\r\n  var that = this;\r\n  setTimeout(function () {\r\n    for (var i = 0; i < options.length; i++) {\r\n        var monthIndex = that.getMonthIndex(options[i].month);\r\n        var toHighlight = $('.calendar[data-month=\"'+monthIndex+'\"] .calendar__day-list .col[data-day=\"'+options[i].day+'\"]').addClass('col--highlight');\r\n    }\r\n  },1000);\r\n};\r\n\r\nDatepicker.prototype.setTranslate = function () {\r\n  if(this.active<12 && this.active>=1) {\r\n    var value = -((this.active-1)*this.width) // I decrement one because we don't wanna translate for the first month.\r\n    this.translate = value;\r\n  } else {\r\n    var value = -((11)*this.width); // 11 because we need to translate to the end of the container - the width of a month calendar.\r\n    this.translate = value;\r\n  }\r\n\r\n}\r\n\r\nvar hillsDatepicker = new Datepicker()\r\n","Faq = function () {\r\n  this.data = {};\r\n  this.canSkip = null;\r\n  this.isReady = null;\r\n  this.topicsList = [];\r\n  this.step = null;\r\n  this.selected = {};\r\n  this.articles = [];\r\n  this.currentArticles = [];\r\n  this.addMoreTimes = 1;\r\n  this.init();\r\n};\r\n\r\nFaq.prototype.init = function () {\r\n  this.canSkip = false;\r\n  this.isReady = false;\r\n  this.step = 1;\r\n  this.data = this.getData(); // I also define this.topicsList in this method.\r\n  this.clickListener();\r\n  this.keyboardListener();\r\n};\r\n\r\nFaq.prototype.getData = function () {\r\n  var obj = {};\r\n  var that = this;\r\n  $.getJSON('/faq/data').done(function (data) {\r\n    for (var i = 0; i < data.rubriques.length; i++) {\r\n      var rubrique = obj[data.rubriques[i]] = data.result[i];\r\n    }\r\n    that.data = obj;\r\n    that.topicsList = data.rubriques;\r\n  })\r\n};\r\n\r\nFaq.prototype.clickListener = function () {\r\n  $('.list').addClass('is-hidden');\r\n  $('.buttons').addClass('is-hidden');\r\n\r\n  var that = this;\r\n  $('.search__next i').click(function () {\r\n    if(that.canSkip) {\r\n      that.next();\r\n    }\r\n  })\r\n  $('.faq .buttons__full').click(function () {\r\n      that.addMore(that.addMoreTimes);\r\n      that.addMoreTimes++;\r\n  })\r\n  $('.faq .buttons__search').click(function () {\r\n    that.newSearch();\r\n  })\r\n  $('.search__reload').click(function () {\r\n    that.prev();\r\n  });\r\n  $(document).on('click','.faq .new-search', function () {\r\n    that.newSearch();\r\n    $(this).parent().remove();\r\n  })\r\n  $(document).on('click','.faq .option',function () {\r\n    var val = $(this).data('content');\r\n    if(that.step==1) {\r\n      that.canSkip = true;\r\n      $('.search__current').text(val).attr('data-content',val);\r\n      $('.faq .option').removeClass('option--selected');\r\n      $(this).toggleClass('option--selected')\r\n      $('.search__next i').addClass('ready');\r\n    } else if(that.step==2) {\r\n      if($(this).hasClass('option--selected')) {\r\n        $(this).removeClass('option--selected');\r\n        var field = $('.search__current').text();\r\n        var arr = field.split(',');\r\n        var index = arr.indexOf(val);\r\n        arr.splice(index,1);\r\n        var newField = arr.join(',');\r\n        $('.search__current').text(newField);\r\n      } else {\r\n        $(this).addClass('option--selected');\r\n        if($('.search__current').text()==\"\") {\r\n          $('.search__current').text(val).attr('data-content',val);\r\n        } else if($('.search__current').text().indexOf(val)==-1) {\r\n          var newVal =  $('.search__current').text()+','+val;\r\n          $('.search__current').text(newVal).attr('data-content',val);\r\n        }\r\n      }\r\n      if($('.search__current').text()!==\"\") {\r\n        that.isReady = true;\r\n        $('.search__next i').addClass('ready');\r\n      } else {\r\n        that.isReady = false;\r\n        $('.search__next i').removeClass('ready');\r\n      }\r\n    }\r\n  })\r\n\r\n};\r\n\r\nFaq.prototype.keyboardListener = function () {\r\n  var that = this;\r\n  $(document).on('keydown',function (ev) {\r\n    var key = ev.keyCode || ev.which;\r\n    if(key==13) {\r\n      that.next();\r\n    }\r\n  })\r\n};\r\n\r\n\r\nFaq.prototype.next = function () {\r\n  var that = this;\r\n  if(this.step==1 && this.canSkip) {\r\n    var val = $('.search__select').find('.option--selected').data('content');\r\n    this.selected.topic = val;\r\n    $('.search__select').find('li').remove();\r\n    $('.search__current').text('');\r\n    $('.search__next i').removeClass('ready');\r\n    $('.search__reload').addClass('search__reload--show');\r\n    setTimeout(function () {\r\n      $('.search__progress .fill').addClass('step-2'); // We need a settimeout there because this element is destroyed and refresh'd while the execution time of this method\r\n    }, 5);\r\n    this.createList('.search__select',this.data[this.selected.topic],false);\r\n    this.slideTitle('Sélectionnez un ou plusieurs mots-clés');\r\n    this.step++;\r\n  } else if(this.step==2 && this.isReady) {\r\n    this.canSkip = false;\r\n    $('.search__progress .fill').addClass('step-3');\r\n    this.selected.keywords = []\r\n    $('.search__select').find('.option--selected').each(function () {\r\n      that.selected.keywords.push($(this).data('content'));\r\n    })\r\n    that.getResult();\r\n    setTimeout(function () {\r\n      $('.search').addClass('fade-out');\r\n    }, 600);\r\n    setTimeout(function () {\r\n      $('.search').addClass('hide');\r\n      $('.list').removeClass('is-hidden');\r\n      $('.buttons').removeClass('is-hidden');\r\n    }, 1100);\r\n  }\r\n};\r\n\r\nFaq.prototype.slideTitle = function (sentence) {\r\n  $('.search__label').addClass('search__label--down');\r\n  setTimeout(function () {\r\n    $('.search__label').removeClass('search__label--down');\r\n  }, 250);\r\n  setTimeout(function () {\r\n    $('.search__label').text(sentence)\r\n  }, 200);\r\n};\r\n\r\nFaq.prototype.prev = function () {\r\n  if(this.step==2) {\r\n    $('.search__progress .fill').removeClass('step-2');\r\n    $('.search__current').text('');\r\n    $('.search__label').removeClass('search__label--change'); // No need to check if it has class, if i want to go back it's that it has the class\r\n    $('.search__label').addClass('search__label--rollback');\r\n    $('.search__select').find('li').remove();\r\n    this.createList('.search__select',this.topicsList,true);\r\n    this.slideTitle('Sélectionnez une rubrique');\r\n    $('.search__next i').removeClass('ready');\r\n    this.isReady = false;\r\n    $('.search__reload').removeClass('search__reload--show');\r\n    this.step--;\r\n    this.canSkip = false;\r\n  }\r\n};\r\n\r\nFaq.prototype.getResult = function () {\r\n  var that = this;\r\n  that.articles = [];\r\n  that.currentArticles = [];\r\n  $.getJSON('faq/keywords/'+this.selected.topic).done(function (data) {\r\n      var x = 0;\r\n      setTimeout(function () {\r\n        that.isDone = true;\r\n        for (var i = 0; i < data.length; i++) {\r\n          if(that.isKeywordInSelection(data[i])) { //that.selected.keywords.indexOf(data[i].from_keyword\r\n            that.currentArticles.push(data[i]);\r\n            if(x<5) { // the if nesting is necessary here.\r\n              var reponse = data[i].reponse;\r\n              var question = data[i].question;\r\n              var title = data[i].title;\r\n              var template =  '<div class=\"col-xs-9 faq-item\">'+\r\n                                '<div class=\"row faq-item__title\">'+title+'</div>'+\r\n                                '<div class=\"row faq-item__question\">'+question+'</div>'+\r\n                                '<div class=\"row faq-item__reponse\">'+reponse+'</div>'+\r\n                              '</div>';\r\n                $('.faq .list').append(template);\r\n                x++;\r\n            }\r\n          }\r\n        }\r\n        console.log(data);\r\n        if(that.currentArticles.length>5) {\r\n          $('.buttons__full').addClass('buttons__full--show')\r\n        } else if(that.currentArticles.length==0) {\r\n          $('.faq .list').append('<span class=\"no-results\">Aucun résultat de recherche, voulez-vous faire <span class=\"new-search\">une nouvelle recherche ?</span></span>')\r\n        }\r\n        if(that.currentArticles.length>0) {\r\n          $('.buttons__search').addClass('buttons__search--show');\r\n        }\r\n        $('.faq-item p').each(function () {\r\n          if($(this).text()=='' || $(this).text()==' ') {\r\n            $(this).remove();\r\n          }\r\n        })\r\n      }, 1000);\r\n  })\r\n};\r\n\r\nFaq.prototype.isKeywordInSelection = function (iteration) {\r\n  bool = false;\r\n  for (var i = 0; i < iteration.keywords.length; i++) {\r\n    if(this.selected.keywords.indexOf(iteration.keywords[i].keyword)!==-1 && this.currentArticles.indexOf(iteration.id)) {\r\n      bool = true;\r\n    } else {\r\n      if(bool == true){\r\n        bool = true;\r\n      }else{\r\n        bool = false;\r\n      }\r\n    }\r\n  }\r\n  return bool;\r\n};\r\n\r\nFaq.prototype.addMore = function (index) {\r\n  iterationNumber = 5;\r\n  index = (index * iterationNumber) + 1;\r\n  iterationIndex = iterationNumber + index;\r\n  if(this.currentArticles.length < iterationIndex){\r\n    iterationIndex = this.currentArticles.length;\r\n    $('.buttons__full').removeClass('buttons__full--show');\r\n  }\r\n  for (var i = index; i < iterationIndex; i++) {\r\n    var template =  '<div class=\"col-xs-9 faq-item\">'+\r\n                      '<div class=\"row faq-item__title\">'+this.currentArticles[i].title+'</div>'+\r\n                      '<div class=\"row faq-item__question\">'+this.currentArticles[i].question+'</div>'+\r\n                      '<div class=\"row faq-item__reponse\">'+this.currentArticles[i].reponse+'</div>'+\r\n                    '</div>';\r\n      $('.faq .list').append(template);\r\n  }\r\n  $('.faq-item p').each(function () {\r\n    if($(this).text()=='' || $(this).text()==' ') {\r\n      $(this).remove();\r\n    }\r\n  })\r\n};\r\n\r\nFaq.prototype.newSearch = function () {\r\n  this.step = 1;\r\n  this.canSkip = false;\r\n  this.isReady = false;\r\n  $('.list').addClass('is-hidden');\r\n  $('.buttons').addClass('is-hidden');\r\n  $('.search__next i').removeClass('ready');\r\n  $('.search').removeClass('hide fade-out');\r\n  $('.search__select .option').remove();\r\n  this.createList('.search__select',this.topicsList,true);\r\n  $('.search__progress .fill').removeClass('step-3 step-2');\r\n  $('.search__current').text('');\r\n  $('.buttons__search').removeClass('buttons__search--show');\r\n  $('.buttons__full').removeClass('buttons__full--show');\r\n  this.slideTitle('Sélectionnez une rubrique');\r\n  $('.faq-item').fadeOut(500);\r\n};\r\n\r\nFaq.prototype.createList = function (target, datas, isRollback) {\r\n  if(!isRollback) {\r\n    for (var i = 0; i < datas.length; i++) {\r\n      $(target).append('<li data-content=\"'+datas[i].name+'\" class=\"option\">'+datas[i].name+'</li>');\r\n    }\r\n  } else {\r\n    for (var i = 0; i < datas.length; i++) {\r\n      $(target).append('<li data-content=\"'+datas[i]+'\" class=\"option\">'+datas[i]+'</li>');\r\n    }\r\n  }\r\n};\r\n\r\nFaqHandler = new Faq();\r\n","FluxHandler = function () {\r\n  this.init();\r\n}\r\n\r\nFluxHandler.prototype.init = function () {\r\n  this.monthList = ['Décembre','Janvier','Février','Mars','Avril','Mai','Juin','Juillet','Août','Septembre','Octobre','Novembre'];\r\n  this.parsingDates();\r\n  this.parsingTags();\r\n  this.trimTable();\r\n};\r\n\r\nFluxHandler.prototype.parsingDates = function () {\r\n  var that = this;\r\n  $('.actus-articles__entreprises .article__footer .date, .actus-articles__cabinet .article__date, .gallery__item .article__date, .echo-article__date').each(function () {\r\n    var val = $(this).text();\r\n    var year = val.substring(0,4);\r\n    if (val.substring(5,7) >= 10){\r\n      var month = val.substring(5,7);\r\n    }else{\r\n      var month = val.substring(6,7);\r\n    }\r\n    month = that.getMonth(month);\r\n    var day = val.substring(8,10);\r\n    var date = 'Publié le '+day+' '+month+' '+year+'.';\r\n    $(this).text(date);\r\n  })\r\n};\r\n\r\nFluxHandler.prototype.parsingTags = function () {\r\n  var parsedContent = $.parseHTML($('.echo-article__content').text());\r\n  var parsedTable = $.parseHTML($('.echo-article__table').text());\r\n  $('.echo-article__content').html(parsedContent);\r\n  $('.echo-article__table').html(parsedTable);\r\n};\r\n\r\nFluxHandler.prototype.trimTable = function () {\r\n  $('.echo-article__table td').each(function () {\r\n    var trimmed = $(this).text().split('').join('');\r\n    $(this).text(trimmed);\r\n  })\r\n  $('.echo-article__table tr').each(function () {\r\n    if($(this).children().length==1) {\r\n      $(this).find('td').attr('colspan',8).addClass('full');\r\n    }\r\n  })\r\n};\r\n\r\nFluxHandler.prototype.testLink = function (val) {\r\n  return /^[A-Za-z0-9]+(?:-[A-Za-z0-9]+)*$/.test(val);\r\n};\r\n\r\nFluxHandler.prototype.replace = function (val) {\r\n  var special = [\"À\",\"Á\",\"Â\",\"Ã\",\"Ä\",\"Å\",\"Æ\",\"Ç\",\"È\",\"É\",\"Ê\",\"Ë\",\"Ì\",\"Í\",\"Î\",\"Ï\",\"Ð\",\"Ñ\",\"Ò\",\"Ó\",\"Ô\",\"Õ\",\"Ö\",\"Ø\",\"Ù\",\"Ú\",\"Û\",\"Ü\",\"Ý\",\"ß\",\"à\",\"á\",\"â\",\"ã\",\"ä\",\"å\",\"æ\",\"ç\",\"è\",\"é\",\"ê\",\"ë\",\"ì\",\"í\",\"î\",\"ï\",\"ñ\",\"ò\",\"ó\",\"ô\",\"õ\",\"ö\",\"ø\",\"ù\",\"ú\",\"û\",\"ü\",\"ý\",\"ÿ\",\"’\",\":\",'&nbsp','/']\r\n  var literal = [\"A\",\"A\",\"A\",\"A\",\"A\",\"A\",\"AE\",\"C\",\"E\",\"E\",\"E\",\"E\",\"I\",\"I\",\"I\",\"I\",\"D\",\"N\",\"O\",\"O\",\"O\",\"O\",\"O\",\"O\",\"U\",\"U\",\"U\",\"U\",\"Y\",\"s\",\"a\",\"a\",\"a\",\"a\",\"a\",\"a\",\"ae\",\"c\",\"e\",\"e\",\"e\",\"e\",\"i\",\"i\",\"i\",\"i\",\"n\",\"o\",\"o\",\"o\",\"o\",\"o\",\"o\",\"u\",\"u\",\"u\",\"u\",\"y\",\"y\",\"\",\"-\",\"\",'-']\r\n  for (i=0;i<special.length;i++) {\r\n    if(val.indexOf(special[i])!==-1) {\r\n      while(val.indexOf(special[i])!==-1) {\r\n        val = val.replace(special[i],literal[i]);\r\n      }\r\n    }\r\n  }\r\n  val = val.replace(/ /g, \"-\");\r\n  val = val.replace('--','-');\r\n  val = val.toLowerCase();\r\n  return val;\r\n};\r\n\r\nFluxHandler.prototype.removeSpecials = function (str) {\r\n  var specialChars = \"!@#$^&%*()+=-[]\\{}|:<>?,.\";\r\n  for (var i = 0; i < specialChars.length; i++) {\r\n      str = str.replace(new RegExp(\"\\\\\" + specialChars[i], 'gi'), '');\r\n  }\r\n  return str;\r\n};\r\n\r\n\r\nFluxHandler.prototype.getMonth = function (index) {\r\n    if(this.month<12) {\r\n        return this.monthList[index]; // return current month as String (e.g: Juin)\r\n    } else {\r\n        // For december\r\n        return this.monthList[0];\r\n    }\r\n};\r\n\r\nfluxXML = new FluxHandler();\r\n","MouseAnimation = function () {\r\n  this.classesList = {};\r\n  this.init();\r\n}\r\n\r\nMouseAnimation.prototype.init = function () {\r\n  this.classesList = {\r\n    wheel: 'mousewheel',\r\n    arrows: 'mouse-arrow'\r\n  };\r\n  this.anim();\r\n};\r\n\r\nMouseAnimation.prototype.anim = function () {\r\n  var that = this;\r\n  that.toggleClasses();\r\n  setInterval(function () {\r\n    that.toggleClasses();\r\n  },3000)\r\n};\r\n\r\nMouseAnimation.prototype.toggleClasses = function () {\r\n  var that = this;\r\n  var wheel = $('.'+that.classesList.wheel);\r\n  var arrows = $('.'+that.classesList.arrows);\r\n  wheel.addClass(that.classesList.wheel+'--animated');\r\n  setTimeout(function () {\r\n    wheel.removeClass(that.classesList.wheel+'--animated');\r\n  },2000)\r\n  for (var i = 0; i < arrows.length; i++) { // animations for arrows.\r\n    this.setTimer(i,arrows)\r\n  }\r\n};\r\n\r\nMouseAnimation.prototype.setTimer = function (iteration,el) { // Otherwise can't access index in the loop using it in a setTimeout\r\n  var that = this;\r\n  setTimeout(function () {\r\n    el.eq(iteration).addClass(that.classesList.arrows+'--show');\r\n    setTimeout(function () {\r\n      if(iteration==0) {\r\n        el.eq(0).removeClass(that.classesList.arrows+'--show');\r\n      } else {\r\n        el.eq(iteration).removeClass(that.classesList.arrows+'--show');\r\n      }\r\n    },400 + iteration*30)\r\n  },500 + iteration*50)\r\n};\r\n\r\nwheelAnim = new MouseAnimation();\r\n","\r\n  Slider = function (selector,originalSlider) {\r\n    this.element = $(selector);\r\n    this.connection = originalSlider;\r\n    this.slideClass = originalSlider.params.slideClass;\r\n    this.slideActiveClass = originalSlider.params.slideActiveClass;\r\n    this.activeSlide = originalSlider.params.slideVisibleClass;\r\n    this.captionClass = '.slider-caption';\r\n    this.speed = originalSlider.params.speed;\r\n    // Initializing object when creating instance and storing object's scope\r\n    that = this;\r\n    this.init();\r\n  }\r\n\r\n  Slider.prototype.init = function () {\r\n    this.connection.on('transitionEnd', function () {\r\n      that.show();\r\n    });\r\n    setTimeout(function () {\r\n      $('.slider-caption').addClass('slider-caption--shown');\r\n      $('.slider-caption__title').addClass('slider-caption__title--shown');\r\n    }, 150);\r\n  };\r\n\r\n  Slider.prototype.toggleClasses = function () {\r\n    var activeClass = \".\"+this.slideActiveClass;\r\n    var caption = this.captionClass; // dot is already in the property here.\r\n    var currentCaption = $(activeClass).find(caption);\r\n    var currentCaptionTitle = $(activeClass).find(caption+'__title');\r\n    $(caption).removeClass('slider-caption--shown'); // removing class to other slider, to make the animation retrigger when going back to others slides\r\n    currentCaption.addClass('slider-caption--shown');\r\n    $(caption+'__title').removeClass('slider-caption__title--shown');\r\n    currentCaptionTitle.addClass('slider-caption__title--shown');\r\n\r\n  };\r\n\r\n  Slider.prototype.show = function () {\r\n    setTimeout(function () {\r\n      that.toggleClasses();\r\n    },this.speed - 190)\r\n  };\r\n","ToolBox = function () {\r\n  this.enabled = null;\r\n  this.selector = null;\r\n  this.el = null;\r\n  this.widthTransition = null;\r\n  this.heightTransition = null;\r\n  this.translateProperties = {};\r\n  this.transition = {};\r\n  this.init();\r\n}\r\n\r\nToolBox.prototype.init = function () {\r\n  this.enabled = false;\r\n  this.selector = '.toolbox';\r\n  this.el = $(this.selector);\r\n  this.translateOffsets = {\r\n    translateX: null,\r\n    translateY: null\r\n  }\r\n  this.transition.timers = {\r\n    transform : 300, // Fucking firefox fix, can't use my dynamic method to get the  transition value\r\n    height: 500 // Fucking firefox fix, can't use my dynamic method to get the  transition value\r\n  }\r\n  this.clickListener()\r\n};\r\n\r\nToolBox.prototype.getTransformTransitionOffset = function () {\r\n  var properties = this.el.css('transform');\r\n  if(properties.indexOf('matrix3d')==-1) { // making an result array for 2D transformations.\r\n    properties = properties.substr(7);\r\n    var lastIndex = properties.indexOf(')')\r\n    properties = properties.substr(0,lastIndex);\r\n    var splittedProperties = properties.split(',')\r\n    var translateX = splittedProperties[4];\r\n    var translateY = splittedProperties[5];\r\n    this.translateOffsets.translateX = translateX+\"px\";\r\n    this.translateOffsets.translateY = translateY+\"px\";\r\n  } else {\r\n    //TODO, for 3d transformations cases\r\n  }\r\n};\r\n\r\nToolBox.prototype.getTransitionTime = function (property) {\r\n  var properties = this.el.css('transition') || this.el.css('-moz-transition')\r\n  properties = properties.split(',')\r\n  for (var i = 0; i < properties.length; i++) {\r\n    if(properties[i].indexOf(property)!==-1) {\r\n      var value = properties[i].split(' ')[2]\r\n      if(value.indexOf('s')!==-1 && value.indexOf('ms')==-1) {\r\n        var index = value.indexOf('s');\r\n        var time = value.substr(0,index);\r\n        time = time*1000;\r\n        return time\r\n      } else if(value.indexOf('ms')!==-1) {\r\n        return time\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nToolBox.prototype.clickListener = function () {\r\n  var that = this;\r\n  this.el.click(function () {\r\n    that.toggleState();\r\n  });\r\n  $('body >*:not(.toolbox)').click(function () {\r\n    if(that.enabled) {\r\n      that.close();\r\n    }\r\n  })\r\n};\r\n\r\nToolBox.prototype.open = function () {\r\n  var that = this;\r\n  this.enabled = true;\r\n  var transitionValue = this.transition.timers.transform;\r\n  //console.log(this.transition.timers);\r\n  this.el.addClass('toolbox--open-x');\r\n  this.el.removeClass('toolbox--delay');\r\n  setTimeout(function () {\r\n    that.el.addClass('toolbox--open-y');\r\n  },transitionValue)\r\n};\r\n\r\nToolBox.prototype.close = function () {\r\n  var that = this;\r\n  var transitionValue = this.transition.timers.height;//Fix for firefox, setTimeout second argument uses window scope in Firefox.\r\n  // console.log(transitionValue);\r\n  //console.log(this);\r\n  this.el.removeClass('toolbox--open-y');\r\n  that.el.addClass('toolbox--delay');\r\n  setTimeout(function () {\r\n    that.el.removeClass('toolbox--open-x');\r\n  },transitionValue)\r\n  this.enabled = false\r\n};\r\n\r\nToolBox.prototype.toggleState = function () {\r\n  if(!this.enabled) {\r\n    this.open()\r\n  } else {\r\n    this.close()\r\n  }\r\n};\r\n\r\ncabinetTools = new ToolBox()\r\n"]}